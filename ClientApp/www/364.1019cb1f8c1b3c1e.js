"use strict";(self.webpackChunkloadgistix=self.webpackChunkloadgistix||[]).push([[364],{1708:(q,A,s)=>{s.d(A,{I:()=>_});var D=s(7445),t=s(5e3),r=s(8279),h=s(7261),Z=s(6407),g=s(8951),U=s(4521),y=s(9808),T=s(9224);function e(c,v){if(1&c&&t._UZ(0,"img",7),2&c){const u=t.oxw().$implicit;t.Q6J("src","/Images/Adverts/"+u.id+u.avatar,t.LSH)}}function S(c,v){if(1&c&&(t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title",4),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.YNc(6,e,1,1,"img",5),t.qZA(),t.TgZ(7,"mat-card-content"),t._uU(8),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"a",6),t._uU(12),t.qZA(),t.qZA(),t.qZA()),2&c){const u=v.$implicit;t.xp6(3),t.Oqu(u.title),t.xp6(2),t.Oqu(u.subTitle),t.xp6(1),t.Q6J("ngIf",u.avatar),t.xp6(2),t.hij(" ",u.content,""),t.xp6(3),t.Q6J("href",u.link,t.LSH),t.xp6(1),t.Oqu(u.link)}}function E(c,v){if(1&c&&(t.ynx(0),t.YNc(1,S,13,6,"mat-card",2),t.BQk()),2&c){const u=t.oxw();t.xp6(1),t.Q6J("ngForOf",u.advertItems)}}function p(c,v){1&c&&(t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title",4),t._uU(3,"Loadgistix"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Get more"),t.qZA(),t._UZ(6,"img",8),t.qZA(),t.TgZ(7,"mat-card-content"),t._uU(8," Contact us today - we will show you how to get the best out of Loadgistix! "),t.qZA(),t.qZA())}let _=(()=>{class c{constructor(u,f,x,I,w){this.apiService=u,this._snackBar=f,this.variableService=x,this.authService=I,this._router=w,this.loading=!0,this.advertItems=[]}ngOnInit(){this.getAdverts().then(f=>{this.advertItems=f});const u=(0,D.F)(6e5);this.subscription=u.subscribe(f=>{this.authService.check().subscribe(x=>{x&&this.getAdverts().then(I=>{this.advertItems=I})})})}getAdverts(){return new Promise(f=>{try{this.apiService.post("adverts","available",null).subscribe({next:x=>{1==x.result?f(x.data):"Expired"==x.message?this._router.navigate(["/sign-out"]):this._snackBar.open("Error: "+x.message,null,{duration:2e3})},error:x=>{console.log(x),this._snackBar.open("Error: "+x,null,{duration:2e3})},complete:()=>{}})}catch(x){f([])}})}}return c.\u0275fac=function(u){return new(u||c)(t.Y36(r.s),t.Y36(h.ux),t.Y36(Z.S),t.Y36(g.e),t.Y36(U.F0))},c.\u0275cmp=t.Xpm({type:c,selectors:[["advert"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden",2,"margin-bottom","12px"],[2,"font-size","18px"],["mat-card-sm-image","",3,"src",4,"ngIf"],["target","_blank",3,"href"],["mat-card-sm-image","",3,"src"],["mat-card-sm-image","","src","assets/images/no-image.jpg"]],template:function(u,f){1&u&&(t.YNc(0,E,2,1,"ng-container",0),t.YNc(1,p,9,0,"mat-card",1)),2&u&&(t.Q6J("ngIf",f.advertItems.length>0),t.xp6(1),t.Q6J("ngIf",0===f.advertItems.length))},directives:[y.O5,y.sg,T.a8,T.C1,T.n5,T.$j,T.dn,T.vP],styles:[".mat-card-sm-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),c})()},7738:(q,A,s)=>{s.d(A,{_:()=>E});var D=s(7295),t=s(7579),r=s(5e3),h=s(8966),Z=s(9808),g=s(7423);function U(p,_){if(1&p){const c=r.EpF();r.TgZ(0,"webcam",11),r.NdJ("imageCapture",function(u){return r.CHM(c),r.oxw(2).handleImage(u)}),r.qZA()}if(2&p){const c=r.oxw(2);r.Q6J("height",500)("width",1e3)("trigger",c.triggerObservable)("switchCamera",c.nextWebcamObservable)}}function y(p,_){if(1&p&&(r.TgZ(0,"ul"),r.TgZ(1,"li"),r._uU(2),r.ALo(3,"json"),r.qZA(),r.qZA()),2&p){const c=_.$implicit;r.xp6(2),r.Oqu(r.lcZ(3,1,c))}}function T(p,_){if(1&p&&(r.TgZ(0,"div"),r.TgZ(1,"h4"),r._uU(2,"Error Messages:"),r.qZA(),r.YNc(3,y,4,3,"ul",12),r.qZA()),2&p){const c=r.oxw(2);r.xp6(3),r.Q6J("ngForOf",c.errors)}}function e(p,_){if(1&p&&(r.TgZ(0,"div"),r.TgZ(1,"div",8),r.YNc(2,U,1,4,"webcam",9),r.qZA(),r.YNc(3,T,4,1,"div",10),r.qZA()),2&p){const c=r.oxw();r.xp6(2),r.Q6J("ngIf",c.showWebcam),r.xp6(1),r.Q6J("ngIf",c.errors.length>0)}}function S(p,_){1&p&&r._uU(0," Camera device not available ")}let E=(()=>{class p{constructor(c){this.dialogRef=c,this.showWebcam=!0,this.isCameraExist=!0,this.errors=[],this.trigger=new t.x,this.nextWebcam=new t.x}ngOnInit(){D.BF.getAvailableVideoInputs().then(c=>{this.isCameraExist=c&&c.length>0})}takeSnapshot(){this.trigger.next()}onOffWebCame(){this.showWebcam=!this.showWebcam}handleInitError(c){this.errors.push(c)}changeWebCame(c){this.nextWebcam.next(c)}handleImage(c){this.dialogRef.close(c)}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}cancel(){this.dialogRef.close(null)}}return p.\u0275fac=function(c){return new(c||p)(r.Y36(h.so))},p.\u0275cmp=r.Xpm({type:p,selectors:[["app-camera"]],decls:12,vars:2,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary",2,"margin-bottom","0px !important"],["mat-dialog-content","",2,"padding","0!important"],[4,"ngIf","ngIfElse"],["noCameraExist",""],["mat-dialog-actions","",1,"dialog-footer",2,"margin-top","0px !important"],[2,"flex","1 1 auto"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[2,"text-align","center"],[3,"height","width","trigger","switchCamera","imageCapture",4,"ngIf"],[4,"ngIf"],[3,"height","width","trigger","switchCamera","imageCapture"],[4,"ngFor","ngForOf"]],template:function(c,v){if(1&c&&(r.TgZ(0,"h1",0),r._uU(1,"Take Photo"),r.qZA(),r.TgZ(2,"div",1),r.YNc(3,e,4,2,"div",2),r.YNc(4,S,1,0,"ng-template",null,3,r.W1O),r.qZA(),r.TgZ(6,"div",4),r._UZ(7,"span",5),r.TgZ(8,"button",6),r.NdJ("click",function(){return v.cancel()}),r._uU(9,"Cancel"),r.qZA(),r.TgZ(10,"button",7),r.NdJ("click",function(){return v.takeSnapshot()}),r._uU(11,"Take Photo"),r.qZA(),r.qZA()),2&c){const u=r.MAs(5);r.xp6(3),r.Q6J("ngIf",v.isCameraExist)("ngIfElse",u)}},directives:[h.uh,h.xY,Z.O5,h.H8,g.lW,D.i3,Z.sg],pipes:[Z.Ts],styles:[".button[_ngcontent-%COMP%]{color:#fff;background-color:#00f;padding:4px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:.4s;cursor:pointer;border-radius:2px}ul.links[_ngcontent-%COMP%]{padding-bottom:10px}"]}),p})()},3364:(q,A,s)=>{s.r(A),s.d(A,{DriversModule:()=>Se});var D=s(4521),t=s(3075),r=s(8966),h=s(6087),Z=s(4847),g=s(4999),U=s(3098),y=s(7579),T=s(7738),e=s(5e3),S=s(7261),E=s(8279),p=s(2313),_=s(7093),c=s(7322),v=s(7531),u=s(9808),f=s(6856),x=s(4107),I=s(7423),w=s(508);function O(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"First Name is required"),e.qZA())}function Y(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Last Name is required"),e.qZA())}function k(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"ID Number is required"),e.qZA())}function L(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Phone is required"),e.qZA())}function B(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Email is required"),e.qZA())}function M(a,o){if(1&a&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.code)}}function F(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"img",34),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(71).click()}),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("src",i.previewImage,e.LSH)}}function J(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"img",34),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(71).click()}),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("src","/Images/Drivers/"+i.form.value.id+i.form.value.avatar,e.LSH)}}function P(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"img",35),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(71).click()}),e.qZA()}}let Q=(()=>{class a{constructor(i,n,l,m,d,C){this.dialog=i,this.dialogRef=n,this.data=l,this._snackBar=m,this.apiService=d,this.sanitizer=C,this.previewImage=null,this.hasError=(b,N)=>this.form.controls[b].hasError(N),this.formErrors=l.formErrors,this.formData=l,this._unsubscribeAll=new y.x}ngOnInit(){this.form=this.data.form,this.formValid=!1}handleFileInput(i){this.fileToUpload=i.item(0),this.form.controls.fileToUpload.setValue(this.fileToUpload);var n=(this.fileToUpload.size/1048576).toFixed(2);if(Number(n)>Number(.25))return this._snackBar.open("Error: Maximum FileSize is 200kB",null,{duration:2e3}),!1;{let l=new FileReader;l.onload=m=>{this.previewImage=m.target.result},l.readAsDataURL(this.fileToUpload)}}initCamera(){const i=new r.vA;i.autoFocus=!0,i.disableClose=!0,i.hasBackdrop=!0,i.ariaLabel="fffff",i.width="800px",this.dialog.open(T._,i).afterClosed().subscribe(l=>{l&&(this.form.controls.avatar.setValue(l._imageAsDataUrl),this.previewImage=l._imageAsDataUrl,this.form.controls.avatarChanged.setValue(!0))})}onNoClick(){this.dialogRef.close(!1)}onYesClick(){setTimeout(()=>{this.dialogRef.close(this.form.value)},100)}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(r.uw),e.Y36(r.so),e.Y36(r.WI),e.Y36(S.ux),e.Y36(E.s),e.Y36(p.H7))},a.\u0275cmp=e.Xpm({type:a,selectors:[["dialog-driver"]],decls:86,vars:16,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary"],["mat-dialog-content","","fxLayout","column"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","form","novalidate","",1,"mat-white-bg","w-100-p",2,"padding","0px!important",3,"formGroup"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxFlex.gt-xs","50",1,"p-4",2,"padding","0px!important"],["appearance","outline",1,"w-100-p"],["matInput","","placeholder","FirstName","formControlName","firstName","id","description"],[4,"ngIf"],["matInput","","placeholder","LastName","formControlName","lastName","id","description"],["matInput","","placeholder","IdNumber","formControlName","idNumber","id","description"],["matInput","","placeholder","Phone","formControlName","phone","id","description"],["matInput","","placeholder","Email","formControlName","email","id","email"],["matInput","","placeholder","Password","formControlName","password","id","password"],["matInput","","readonly","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["picker_dateOfBirth",""],["placeholder","LicenceTypeId","formControlName","licenceTypeId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","readonly","","formControlName","licenceExpiryDate",3,"matDatepicker"],["picker_licenceExpiryDate",""],["fxFlex","100","fxLayout","row","fxLayoutAlign","center center",1,"p-4"],["id","fileInput","type","file","accept",".jpg,.png,.jpeg",2,"display","none",3,"change"],["Image",""],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","row"],["mat-flat-button","","fxFlex","100","color","primary",2,"margin-left","2px","margin-right","2px",3,"click"],["fxFlex","","fxLayout","row","fxLayoutAlign","center center",2,"margin-top","4px"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","class","image",3,"src","click",4,"ngIf"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","src","assets/images/no-image.jpg","class","image",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-footer"],[2,"flex","1 1 auto"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"src","click"],["src","assets/images/no-image.jpg",1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"click"]],template:function(i,n){if(1&i){const l=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"mat-form-field",5),e.TgZ(7,"mat-label"),e._uU(8,"First Name"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,O,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14,"Last Name"),e.qZA(),e._UZ(15,"input",8),e.YNc(16,Y,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"mat-form-field",5),e.TgZ(19,"mat-label"),e._uU(20,"ID Number"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,k,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26,"Phone"),e.qZA(),e._UZ(27,"input",10),e.YNc(28,L,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"mat-form-field",5),e.TgZ(31,"mat-label"),e._uU(32,"Email"),e.qZA(),e._UZ(33,"input",11),e.YNc(34,B,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(35,"div",4),e.TgZ(36,"mat-form-field",5),e.TgZ(37,"mat-label"),e._uU(38,"Password"),e.qZA(),e._UZ(39,"input",12),e.qZA(),e.qZA(),e.TgZ(40,"div",4),e.TgZ(41,"mat-form-field",5),e.TgZ(42,"mat-label"),e._uU(43,"Date Of Birth"),e.qZA(),e._UZ(44,"input",13),e._UZ(45,"mat-datepicker-toggle",14),e._UZ(46,"mat-datepicker",null,15),e.TgZ(48,"mat-error"),e._uU(49,"Date Of Birth is required"),e.qZA(),e.qZA(),e.qZA(),e._UZ(50,"div",4),e.TgZ(51,"div",4),e.TgZ(52,"mat-form-field",5),e.TgZ(53,"mat-label"),e._uU(54,"Licence Type"),e.qZA(),e.TgZ(55,"mat-select",16),e.YNc(56,M,2,2,"mat-option",17),e.qZA(),e.TgZ(57,"mat-error"),e._uU(58,"Licence Type is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",4),e.TgZ(60,"mat-form-field",5),e.TgZ(61,"mat-label"),e._uU(62,"Licence Expiry Date"),e.qZA(),e._UZ(63,"input",18),e._UZ(64,"mat-datepicker-toggle",14),e._UZ(65,"mat-datepicker",null,19),e.TgZ(67,"mat-error"),e._uU(68,"Licence Expiry Date is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",20),e.TgZ(70,"input",21,22),e.NdJ("change",function(d){return n.handleFileInput(d.target.files)}),e.qZA(),e.TgZ(72,"div",23),e.TgZ(73,"div",24),e.TgZ(74,"button",25),e.NdJ("click",function(){return e.CHM(l),e.MAs(71).click()}),e._uU(75,"Upload Image"),e.qZA(),e.qZA(),e.TgZ(76,"div",26),e.YNc(77,F,1,1,"img",27),e.YNc(78,J,1,1,"img",27),e.YNc(79,P,1,0,"img",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",29),e._UZ(81,"span",30),e.TgZ(82,"button",31),e.NdJ("click",function(){return n.onNoClick()}),e._uU(83,"Cancel"),e.qZA(),e.TgZ(84,"button",32),e.NdJ("click",function(){return n.onYesClick()}),e._uU(85,"Submit"),e.qZA(),e.qZA()}if(2&i){const l=e.MAs(47),m=e.MAs(66);e.xp6(1),e.hij("",n.formData.title," Driver"),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("ngIf",n.hasError("firstName","required")),e.xp6(6),e.Q6J("ngIf",n.hasError("lastName","required")),e.xp6(6),e.Q6J("ngIf",n.hasError("idNumber","required")),e.xp6(6),e.Q6J("ngIf",n.hasError("phone","required")),e.xp6(6),e.Q6J("ngIf",n.hasError("email","required")),e.xp6(10),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(11),e.Q6J("ngForOf",n.formData.licenceTypeList),e.xp6(7),e.Q6J("matDatepicker",m),e.xp6(1),e.Q6J("for",m),e.xp6(13),e.Q6J("ngIf",n.previewImage),e.xp6(1),e.Q6J("ngIf",!n.previewImage&&n.form.value.avatar),e.xp6(1),e.Q6J("ngIf",!n.previewImage&&!n.form.value.avatar),e.xp6(5),e.Q6J("disabled",!n.form.valid)}},directives:[r.uh,r.xY,_.xw,t._Y,t.JL,_.Wh,_.yH,t.sg,c.KE,c.hX,v.Nt,t.Fj,t.JJ,t.u,u.O5,f.hl,f.nW,c.R9,f.Mq,c.TO,x.gD,u.sg,I.lW,r.H8,w.ey],encapsulation:2}),a})();var W=s(520),j=s(6407),H=s(6362),R=s(1683),$=s(9224),z=s(1708),K=s(7238),G=s(5245);function X(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"th",27),e.TgZ(1,"button",28),e.NdJ("click",function(){return e.CHM(i),e.oxw().initUpsert(null)}),e.TgZ(2,"mat-icon",29),e._uU(3,"add"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.loading)}}function V(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"td",30),e.TgZ(1,"button",31),e.NdJ("click",function(){const m=e.CHM(i).$implicit;return e.oxw().initUpsert(m)}),e.TgZ(2,"mat-icon",29),e._uU(3,"edit"),e.qZA(),e.qZA(),e.TgZ(4,"button",32),e.NdJ("click",function(){const m=e.CHM(i).$implicit;return e.oxw().initDelete(m.id)}),e.TgZ(5,"mat-icon",29),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.loading),e.xp6(3),e.Q6J("disabled",i.loading)}}function ee(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",34),e._uU(2,"UserId"),e.qZA(),e.qZA())}function te(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.userDescription," ")}}function ie(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",36),e._uU(2,"First Name"),e.qZA(),e.qZA())}function ae(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.firstName," ")}}function re(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",37),e._uU(2,"Last Name"),e.qZA(),e.qZA())}function ne(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.lastName," ")}}function oe(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",38),e._uU(2,"Phone"),e.qZA(),e.qZA())}function le(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.phone," ")}}function se(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",39),e._uU(2,"Email"),e.qZA(),e.qZA())}function ce(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.email," ")}}function me(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",40),e._uU(2,"ID Number"),e.qZA(),e.qZA())}function de(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.idNumber," ")}}function ue(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",41),e._uU(2,"Date Of Birth"),e.qZA(),e.qZA())}function pe(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,i.dateOfBirth)," ")}}function ge(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",42),e._uU(2,"Licence Type"),e.qZA(),e.qZA())}function fe(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.licenceType?i.licenceType.code:""," ")}}function he(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",43),e._uU(2,"Licence Expiry Date"),e.qZA(),e.qZA())}function _e(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,i.licenceExpiryDate)," ")}}function ve(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",44),e._uU(2,"Photo"),e.qZA(),e.qZA())}function xe(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.avatar," ")}}function Ze(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",45),e._uU(2,"Status"),e.qZA(),e.qZA())}function Te(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.status.description," ")}}function De(a,o){1&a&&e._UZ(0,"tr",46)}function Ce(a,o){1&a&&e._UZ(0,"tr",47)}const Ae=function(){return[5,10,25,100]};let be=(()=>{class a{constructor(i,n,l,m,d,C,b,N){this.dialog=i,this._formBuilder=n,this.apiService=l,this._snackBar=m,this.variableService=d,this._router=C,this.fuseSplashScreenService=b,this.fuseConfirmationService=N,this.licenceTypeList=[],this.driverList=[],this.fuseSplashScreenService.show(),this.loading=!0,this.displayedColumns=["cud","firstName","lastName","licenceTypeDescription"]}ngOnInit(){this.getLicenceTypes().then(i=>{this.licenceTypeList=i,this.getDrivers().then(n=>{this.variableService.setPageSelected("Drivers"),this.driverList=n,this.dataSource=new g.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1})})}getDrivers(){return new Promise(n=>{try{this.apiService.get("drivers").subscribe({next:l=>{1==l.result?n(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){n([])}})}getLicenceTypes(){return new Promise(n=>{try{this.apiService.get("licenceTypes").subscribe({next:l=>{1==l.result?n(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){n([])}})}initUpsert(i){this.form=this._formBuilder.group({id:[null==i?U.i.create().toString():i.id],userId:[null==i?localStorage.getItem("userId"):i.userId],firstName:[null==i?null:i.firstName,t.kI.required],lastName:[null==i?null:i.lastName,t.kI.required],phone:[null==i?null:i.phone,t.kI.required],email:[null==i?null:i.email,t.kI.required],password:[null],idNumber:[null==i?null:i.idNumber,t.kI.required],dateOfBirth:[null==i?null:i.dateOfBirth,t.kI.required],licenceTypeId:[null==i?null:i.licenceTypeId,t.kI.required],licenceExpiryDate:[null==i?null:i.licenceExpiryDate,t.kI.required],avatar:[null==i?null:i.avatar],avatarChanged:[!1],fileToUpload:[null],statusId:[null==i?U.i.parse("50000F55-C3B0-4D92-BCFD-3203F5FD35B8").toString():i.statusId]});const n=new r.vA;n.data={item:i,form:this.form,licenceTypeList:this.licenceTypeList,title:null==i?"Insert":"Update"},n.autoFocus=!0,n.disableClose=!0,n.hasBackdrop=!0,n.ariaLabel="fffff",n.width="800px",this.dialog.open(Q,n).afterClosed().subscribe(m=>{!1!==m&&(this.fuseSplashScreenService.show(),this.loading=!0,null==i?this.apiService.post("drivers",null,m).subscribe({next:d=>{1==d.result?"00000000-0000-0000-0000-000000000000"!=d.id&&m.fileToUpload?this.uploadFile(m.fileToUpload,d.id+"."+m.fileToUpload.name.split(".").pop()).then(C=>{d.data.avatar="."+m.fileToUpload.name.split(".").pop(),this.driverList.push(d.data),this.dataSource=new g.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1}):(this.driverList.push(d.data),this.dataSource=new g.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==d.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+d.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:d=>{console.log(d),this._snackBar.open("Error: "+d,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}):this.apiService.put("drivers",m).subscribe({next:d=>{if(1==d.result)if("00000000-0000-0000-0000-000000000000"!=d.id&&m.fileToUpload)this.uploadFile(m.fileToUpload,d.id+"."+m.fileToUpload.name.split(".").pop()).then(C=>{d.data.avatar="."+m.fileToUpload.name.split(".").pop();let b=this.driverList.findIndex(N=>N.id===i.id);this.driverList[b]=d.data,this.dataSource=new g.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1});else{let C=this.driverList.findIndex(b=>b.id===i.id);this.driverList[C]=d.data,this.dataSource=new g.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1}else"Expired"==d.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+d.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:d=>{console.log(d),this._snackBar.open("Error: "+d,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}initDelete(i){this.deleteForm=this._formBuilder.group({title:"Delete Driver",message:"Are you sure you want to remove this Driver",icon:this._formBuilder.group({show:!0,name:"heroicons_outline:exclamation",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Remove",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"Cancel"})}),dismissible:!0}),this.fuseConfirmationService.open(this.deleteForm.value).afterClosed().subscribe(l=>{"confirmed"===l&&(this.fuseSplashScreenService.show(),this.loading=!0,this.apiService.delete("drivers",i).subscribe({next:m=>{1==m.result?(this.driverList.splice(this.driverList.findIndex(d=>d.id===m.id),1),this.dataSource=new g.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==m.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+m.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:m=>{console.log(m),this._snackBar.open("Error: "+m,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}uploadFile(i,n){return new Promise(m=>{try{const d=new FormData;d.append("file",i),this.apiService.upload("drivers",d,n).subscribe(C=>{C.type===W.dt.Response&&m(!0)})}catch(d){m(!1)}})}getAddressSubstring(i,n){let l=i.split(n);return l.length>1?l[0]+","+l[1]:i}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(r.uw),e.Y36(t.qu),e.Y36(E.s),e.Y36(S.ux),e.Y36(j.S),e.Y36(D.F0),e.Y36(H.j),e.Y36(R.R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["drivers"]],viewQuery:function(i,n){if(1&i&&(e.Gf(h.NW,5),e.Gf(Z.YE,5)),2&i){let l;e.iGM(l=e.CRH())&&(n.paginatorDriver=l.first),e.iGM(l=e.CRH())&&(n.sortDriver=l.first)}},decls:48,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],["fusePerfectScrollbar","",1,"page-layout","blank","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-6","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","lg:col-span-4","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],[1,"table-container","bg-card","shadow","rounded-2xl"],[1,"mat-elevation-z5",2,"padding","4px!important"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","cud"],["mat-header-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matHeaderCellDef"],["mat-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matCellDef"],["matColumnDef","userDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","table-cell",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phone"],["matColumnDef","email"],["matColumnDef","idNumber"],["matColumnDef","dateOfBirth"],["matColumnDef","licenceTypeDescription"],["matColumnDef","licenceExpiryDate"],["matColumnDef","avatar"],["matColumnDef","statusDescription"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","disabled"],[1,"sm:col-span-2","lg:col-span-2","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],["mat-header-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Add Driver",3,"disabled","click"],[1,"fab-icon"],["mat-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Update Driver",3,"disabled","click"],["mat-icon-button","","color","default","matTooltip","Remove Driver",3,"disabled","click"],["mat-header-cell",""],["mat-sort-header","userDescription",1,"table-header"],["mat-cell","",1,"table-cell"],["mat-sort-header","firstName",1,"table-header"],["mat-sort-header","lastName",1,"table-header"],["mat-sort-header","phone",1,"table-header"],["mat-sort-header","email",1,"table-header"],["mat-sort-header","idNumber",1,"table-header"],["mat-sort-header","dateOfBirth",1,"table-header"],["mat-sort-header","licenceTypeDescription",1,"table-header"],["mat-sort-header","licenceExpiryDate",1,"table-header"],["mat-sort-header","avatar",1,"table-header"],["mat-sort-header","statusDescription",1,"table-header"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"mat-card",5),e.TgZ(6,"table",6),e.ynx(7,7),e.YNc(8,X,4,1,"th",8),e.YNc(9,V,7,2,"td",9),e.BQk(),e.ynx(10,10),e.YNc(11,ee,3,0,"th",11),e.YNc(12,te,2,1,"td",12),e.BQk(),e.ynx(13,13),e.YNc(14,ie,3,0,"th",11),e.YNc(15,ae,2,1,"td",12),e.BQk(),e.ynx(16,14),e.YNc(17,re,3,0,"th",11),e.YNc(18,ne,2,1,"td",12),e.BQk(),e.ynx(19,15),e.YNc(20,oe,3,0,"th",11),e.YNc(21,le,2,1,"td",12),e.BQk(),e.ynx(22,16),e.YNc(23,se,3,0,"th",11),e.YNc(24,ce,2,1,"td",12),e.BQk(),e.ynx(25,17),e.YNc(26,me,3,0,"th",11),e.YNc(27,de,2,1,"td",12),e.BQk(),e.ynx(28,18),e.YNc(29,ue,3,0,"th",11),e.YNc(30,pe,3,3,"td",12),e.BQk(),e.ynx(31,19),e.YNc(32,ge,3,0,"th",11),e.YNc(33,fe,2,1,"td",12),e.BQk(),e.ynx(34,20),e.YNc(35,he,3,0,"th",11),e.YNc(36,_e,3,3,"td",12),e.BQk(),e.ynx(37,21),e.YNc(38,ve,3,0,"th",11),e.YNc(39,xe,2,1,"td",12),e.BQk(),e.ynx(40,22),e.YNc(41,Ze,3,0,"th",11),e.YNc(42,Te,2,1,"td",12),e.BQk(),e.YNc(43,De,1,0,"tr",23),e.YNc(44,Ce,1,0,"tr",24),e.qZA(),e._UZ(45,"mat-paginator",25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",26),e._UZ(47,"advert"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(6),e.Q6J("dataSource",n.dataSource),e.xp6(37),e.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,Ae))("pageSize",10)("disabled",n.loading))},directives:[$.a8,g.BZ,Z.YE,g.w1,g.fO,g.Dz,g.as,g.nj,h.NW,z.I,g.ge,I.lW,K.gM,G.Hw,g.ev,Z.nU,g.XQ,g.Gk],pipes:[u.uU],encapsulation:2}),a})();var Ue=s(7776);const ye=[{path:"",component:be}];let Se=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[D.Bz.forChild(ye),Ue.m]]}),a})()},3098:(q,A)=>{var D=function(){function t(r){if(!r)throw new TypeError("Invalid argument; `value` has no value.");this.value=t.EMPTY,r&&t.isGuid(r)&&(this.value=r)}return t.isGuid=function(r){var h=r.toString();return r&&(r instanceof t||t.validator.test(h))},t.create=function(){return new t([t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-"))},t.createEmpty=function(){return new t("emptyguid")},t.parse=function(r){return new t(r)},t.raw=function(){return[t.gen(2),t.gen(1),t.gen(1),t.gen(1),t.gen(3)].join("-")},t.gen=function(r){for(var h="",Z=0;Z<r;Z++)h+=(65536*(1+Math.random())|0).toString(16).substring(1);return h},t.prototype.equals=function(r){return t.isGuid(r)&&this.value===r.toString()},t.prototype.isEmpty=function(){return this.value===t.EMPTY},t.prototype.toString=function(){return this.value},t.prototype.toJSON=function(){return{value:this.value}},t.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),t.EMPTY="00000000-0000-0000-0000-000000000000",t}();A.i=D}}]);