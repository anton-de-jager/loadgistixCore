"use strict";(self.webpackChunkloadgistix=self.webpackChunkloadgistix||[]).push([[75],{1708:(D,h,n)=>{n.d(h,{I:()=>x});var d=n(7445),a=n(5e3),t=n(8279),f=n(7261),v=n(6407),p=n(8951),g=n(4521),u=n(9808),m=n(9224);function Z(s,_){if(1&s&&a._UZ(0,"img",7),2&s){const e=a.oxw().$implicit;a.Q6J("src","/Images/Adverts/"+e.id+e.avatar,a.LSH)}}function C(s,_){if(1&s&&(a.TgZ(0,"mat-card",3),a.TgZ(1,"mat-card-title-group"),a.TgZ(2,"mat-card-title",4),a._uU(3),a.qZA(),a.TgZ(4,"mat-card-subtitle"),a._uU(5),a.qZA(),a.YNc(6,Z,1,1,"img",5),a.qZA(),a.TgZ(7,"mat-card-content"),a._uU(8),a._UZ(9,"br"),a._UZ(10,"br"),a.TgZ(11,"a",6),a._uU(12),a.qZA(),a.qZA(),a.qZA()),2&s){const e=_.$implicit;a.xp6(3),a.Oqu(e.title),a.xp6(2),a.Oqu(e.subTitle),a.xp6(1),a.Q6J("ngIf",e.avatar),a.xp6(2),a.hij(" ",e.content,""),a.xp6(3),a.Q6J("href",e.link,a.LSH),a.xp6(1),a.Oqu(e.link)}}function T(s,_){if(1&s&&(a.ynx(0),a.YNc(1,C,13,6,"mat-card",2),a.BQk()),2&s){const e=a.oxw();a.xp6(1),a.Q6J("ngForOf",e.advertItems)}}function A(s,_){1&s&&(a.TgZ(0,"mat-card",3),a.TgZ(1,"mat-card-title-group"),a.TgZ(2,"mat-card-title",4),a._uU(3,"Loadgistix"),a.qZA(),a.TgZ(4,"mat-card-subtitle"),a._uU(5,"Get more"),a.qZA(),a._UZ(6,"img",8),a.qZA(),a.TgZ(7,"mat-card-content"),a._uU(8," Contact us today - we will show you how to get the best out of Loadgistix! "),a.qZA(),a.qZA())}let x=(()=>{class s{constructor(e,l,r,i,o){this.apiService=e,this._snackBar=l,this.variableService=r,this.authService=i,this._router=o,this.loading=!0,this.advertItems=[]}ngOnInit(){this.getAdverts().then(l=>{this.advertItems=l});const e=(0,d.F)(6e5);this.subscription=e.subscribe(l=>{this.authService.check().subscribe(r=>{r&&this.getAdverts().then(i=>{this.advertItems=i})})})}getAdverts(){return new Promise(l=>{try{this.apiService.post("adverts","available",null).subscribe({next:r=>{1==r.result?l(r.data):"Expired"==r.message?this._router.navigate(["/sign-out"]):this._snackBar.open("Error: "+r.message,null,{duration:2e3})},error:r=>{console.log(r),this._snackBar.open("Error: "+r,null,{duration:2e3})},complete:()=>{}})}catch(r){l([])}})}}return s.\u0275fac=function(e){return new(e||s)(a.Y36(t.s),a.Y36(f.ux),a.Y36(v.S),a.Y36(p.e),a.Y36(g.F0))},s.\u0275cmp=a.Xpm({type:s,selectors:[["advert"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden",2,"margin-bottom","12px"],[2,"font-size","18px"],["mat-card-sm-image","",3,"src",4,"ngIf"],["target","_blank",3,"href"],["mat-card-sm-image","",3,"src"],["mat-card-sm-image","","src","assets/images/no-image.jpg"]],template:function(e,l){1&e&&(a.YNc(0,T,2,1,"ng-container",0),a.YNc(1,A,9,0,"mat-card",1)),2&e&&(a.Q6J("ngIf",l.advertItems.length>0),a.xp6(1),a.Q6J("ngIf",0===l.advertItems.length))},directives:[u.O5,u.sg,m.a8,m.C1,m.n5,m.$j,m.dn,m.vP],styles:[".mat-card-sm-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),s})()},3413:(D,h,n)=>{n.d(h,{M:()=>_});var d=n(8966),a=n(8120),t=n(5e3),f=n(8279),v=n(2313),p=n(7093),g=n(3075),u=n(7322),m=n(7531),Z=n(9808),C=n(7423);function T(e,l){if(1&e){const r=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"mat-form-field",5),t.TgZ(2,"mat-label"),t._uU(3,"VehicleDescription"),t.qZA(),t._UZ(4,"input",16),t.TgZ(5,"mat-star-rating",7),t.NdJ("ratingUpdated",function(o){return t.CHM(r),t.oxw().onRatingChanged("ratingVehicleDescription",o)}),t.qZA(),t.TgZ(6,"mat-error"),t._uU(7,"Rating is required"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const r=t.oxw();t.xp6(5),t.Q6J("rating",r.ratingVehicleDescription)("starCount",5)("color",r.starColorP)}}function A(e,l){if(1&e){const r=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"mat-form-field",5),t.TgZ(2,"mat-label"),t._uU(3,"LoadDescription"),t.qZA(),t._UZ(4,"input",17),t.TgZ(5,"mat-star-rating",7),t.NdJ("ratingUpdated",function(o){return t.CHM(r),t.oxw().onRatingChanged("ratingLoadDescription",o)}),t.qZA(),t.TgZ(6,"mat-error"),t._uU(7,"Rating is required"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const r=t.oxw();t.xp6(5),t.Q6J("rating",r.ratingLoadDescription)("starCount",5)("color",r.starColorP)}}function x(e,l){if(1&e){const r=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"mat-form-field",5),t.TgZ(2,"mat-label"),t._uU(3,"Payment"),t.qZA(),t._UZ(4,"input",18),t.TgZ(5,"mat-star-rating",7),t.NdJ("ratingUpdated",function(o){return t.CHM(r),t.oxw().onRatingChanged("ratingPayment",o)}),t.qZA(),t.TgZ(6,"mat-error"),t._uU(7,"Rating is required"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const r=t.oxw();t.xp6(5),t.Q6J("rating",r.ratingPayment)("starCount",5)("color",r.starColorP)}}function s(e,l){if(1&e){const r=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"mat-form-field",5),t.TgZ(2,"mat-label"),t._uU(3,"Condition"),t.qZA(),t._UZ(4,"input",19),t.TgZ(5,"mat-star-rating",7),t.NdJ("ratingUpdated",function(o){return t.CHM(r),t.oxw().onRatingChanged("ratingCondition",o)}),t.qZA(),t.TgZ(6,"mat-error"),t._uU(7,"Rating is required"),t.qZA(),t.qZA(),t.qZA()}if(2&e){const r=t.oxw();t.xp6(5),t.Q6J("rating",r.ratingCondition)("starCount",5)("color",r.starColorP)}}let _=(()=>{class e{constructor(r,i,o,c,P){this.dialog=r,this.dialogRef=i,this.data=o,this.apiService=c,this.sanitizer=P,this.starColor=a.r.accent,this.starColorP=a.r.primary,this.starColorW=a.r.warn,this.ratingPunctuality=0,this.ratingVehicleDescription=0,this.ratingLoadDescription=0,this.ratingPayment=0,this.ratingCondition=0,this.ratingCare=0,this.ratingAttitude=0,this.hasError=(y,E)=>this.form.controls[y].hasError(E),this.reviewType=o.reviewType,"Driver"===o.reviewType&&(this.reviewDriverRow=o.item),"Load"===o.reviewType&&(this.reviewLoadRow=o.item)}ngOnInit(){this.form=this.data.form,this.ratingPunctuality=this.form.controls.ratingPunctuality.value,this.ratingVehicleDescription=this.form.controls.ratingVehicleDescription.value,this.ratingLoadDescription=this.form.controls.ratingLoadDescription.value,this.ratingPayment=this.form.controls.ratingPayment.value,this.ratingCondition=this.form.controls.ratingCondition.value,this.ratingCare=this.form.controls.ratingCare.value,this.ratingAttitude=this.form.controls.ratingAttitude.value}onRatingChanged(r,i){switch(this.reviewType){case"Driver":switch(r){case"ratingPunctuality":this.ratingPunctuality=i,this.form.controls.ratingPunctuality.setValue(i);break;case"ratingVehicleDescription":this.ratingVehicleDescription=i,this.form.controls.ratingVehicleDescription.setValue(i);break;case"ratingCare":this.ratingCare=i,this.form.controls.ratingCare.setValue(i);break;case"ratingCondition":this.ratingCondition=i,this.form.controls.ratingCondition.setValue(i);break;case"ratingAttitude":this.ratingAttitude=i,this.form.controls.ratingAttitude.setValue(i)}break;case"Load":switch(r){case"ratingPunctuality":this.ratingPunctuality=i,this.form.controls.ratingPunctuality.setValue(i);break;case"ratingLoadDescription":this.ratingLoadDescription=i,this.form.controls.ratingLoadDescription.setValue(i);break;case"ratingPayment":this.ratingPayment=i,this.form.controls.ratingPayment.setValue(i);break;case"ratingCare":this.ratingCare=i,this.form.controls.ratingCare.setValue(i);break;case"ratingAttitude":this.ratingAttitude=i,this.form.controls.ratingAttitude.setValue(i)}}}onNoClick(){this.dialogRef.close(!1)}onYesClick(){this.dialogRef.close(this.form.value)}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(d.uw),t.Y36(d.so),t.Y36(d.WI),t.Y36(f.s),t.Y36(v.H7))},e.\u0275cmp=t.Xpm({type:e,selectors:[["dialog-review"]],decls:38,vars:12,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary"],["mat-dialog-content","","fxLayout","column"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","form","novalidate","",1,"mat-white-bg","w-100-p",2,"padding","0px!important",3,"formGroup"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxFlex.gt-xs","50",1,"p-4",2,"padding","0px!important"],["appearance","outline","floatLabel","true",1,"w-100-p"],["matInput","","type","number","placeholder","Punctuality","formControlName","ratingPunctuality","id","ratingPunctuality",2,"display","none"],[3,"rating","starCount","color","ratingUpdated"],["fxFlex","100","fxFlex.gt-xs","50","class","p-4","style","padding: 0px!important;",4,"ngIf"],["matInput","","type","number","placeholder","Attitude","formControlName","ratingAttitude","id","ratingAttitude",2,"display","none"],["fxFlex","100",1,"p-4",2,"padding","0px!important"],["matInput","","type","note","placeholder","Note","formControlName","note","id","note"],["mat-dialog-actions","",1,"dialog-footer"],[2,"flex","1 1 auto"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],["matInput","","type","number","placeholder","VehicleDescription","formControlName","ratingVehicleDescription","id","ratingVehicleDescription",2,"display","none"],["matInput","","type","number","placeholder","LoadDescription","formControlName","ratingLoadDescription","id","ratingLoadDescription",2,"display","none"],["matInput","","type","number","placeholder","Payment","formControlName","ratingPayment","id","ratingPayment",2,"display","none"],["matInput","","type","number","placeholder","Condition","formControlName","ratingCondition","id","ratingCondition",2,"display","none"]],template:function(r,i){1&r&&(t.TgZ(0,"h1",0),t._uU(1,"Add Review"),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"mat-form-field",5),t.TgZ(7,"mat-label"),t._uU(8,"Punctuality"),t.qZA(),t._UZ(9,"input",6),t.TgZ(10,"mat-star-rating",7),t.NdJ("ratingUpdated",function(c){return i.onRatingChanged("ratingPunctuality",c)}),t.qZA(),t.TgZ(11,"mat-error"),t._uU(12,"Rating is required"),t.qZA(),t.qZA(),t.qZA(),t.YNc(13,T,8,3,"div",8),t.YNc(14,A,8,3,"div",8),t.YNc(15,x,8,3,"div",8),t.YNc(16,s,8,3,"div",8),t.TgZ(17,"div",4),t.TgZ(18,"mat-form-field",5),t.TgZ(19,"mat-label"),t._uU(20,"Attitude"),t.qZA(),t._UZ(21,"input",9),t.TgZ(22,"mat-star-rating",7),t.NdJ("ratingUpdated",function(c){return i.onRatingChanged("ratingAttitude",c)}),t.qZA(),t.TgZ(23,"mat-error"),t._uU(24,"Rating is required"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"div",10),t.TgZ(26,"mat-form-field",5),t.TgZ(27,"mat-label"),t._uU(28,"Note"),t.qZA(),t._UZ(29,"textarea",11),t.TgZ(30,"mat-error"),t._uU(31,"Note is required"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",12),t._UZ(33,"span",13),t.TgZ(34,"button",14),t.NdJ("click",function(){return i.onNoClick()}),t._uU(35,"Cancel"),t.qZA(),t.TgZ(36,"button",15),t.NdJ("click",function(){return i.onYesClick()}),t._uU(37,"Submit"),t.qZA(),t.qZA()),2&r&&(t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(7),t.Q6J("rating",i.ratingPunctuality)("starCount",5)("color",i.starColorP),t.xp6(3),t.Q6J("ngIf","Driver"===i.reviewType),t.xp6(1),t.Q6J("ngIf","Load"===i.reviewType),t.xp6(1),t.Q6J("ngIf","Load"===i.reviewType),t.xp6(1),t.Q6J("ngIf","Driver"===i.reviewType),t.xp6(6),t.Q6J("rating",i.ratingAttitude)("starCount",5)("color",i.starColorP),t.xp6(14),t.Q6J("disabled",!i.form.valid))},directives:[d.uh,d.xY,p.xw,g._Y,g.JL,p.Wh,p.yH,g.sg,u.KE,u.hX,m.Nt,g.wV,g.Fj,g.JJ,g.u,a.T,u.TO,Z.O5,d.H8,C.lW],encapsulation:2}),e})()}}]);